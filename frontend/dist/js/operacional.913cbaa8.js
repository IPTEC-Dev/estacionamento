(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["operacional"],{"17d3":function(e,t,a){"use strict";
/**
 * vue-global-events v1.1.2
 * (c) 2019 Damian Dulisz <damian.dulisz@gmail.com>, Eduardo San Martin Morote <posva13@gmail.com>
 * @license MIT
 */var o;function i(){return null==o?o=/msie|trident/.test(window.navigator.userAgent.toLowerCase()):o}var r=/^[~!&]*/,s=/\W+/,n={"!":"capture","~":"once","&":"passive"};function c(e){var t=e.match(r),a=t[0];return i()?a.indexOf("!")>-1:a.split("").reduce(function(e,t){return e[n[t]]=!0,e},{})}var l={name:"GlobalEvents",props:{target:{type:String,default:"document"},filter:{type:Function,default:function(e){return!0}}},render:function(e){return e()},mounted:function(){var e=this;this._listeners=Object.create(null),Object.keys(this.$listeners).forEach(function(t){var a=e.$listeners[t],o=function(o){e.filter(o,a,t)&&a(o)};window[e.target].addEventListener(t.replace(s,""),o,c(t)),e._listeners[t]=o})},beforeDestroy:function(){var e=this;for(var t in e._listeners)window[e.target].removeEventListener(t.replace(s,""),e._listeners[t],c(t))}};t["a"]=l},"3b2f":function(e,t,a){e.exports=a.p+"img/aguardando-carteirinha.990413fc.svg"},"56a4":function(e,t,a){"use strict";var o=a("9d26"),i=a("b64a"),r=a("94ab"),s=a("3ccf"),n=a("58df");t["a"]=Object(n["a"])(i["a"],Object(r["a"])("stepper","v-stepper-step","v-stepper")).extend({name:"v-stepper-step",directives:{Ripple:s["a"]},inject:["stepClick"],props:{color:{type:String,default:"primary"},complete:Boolean,completeIcon:{type:String,default:"$vuetify.icons.complete"},editIcon:{type:String,default:"$vuetify.icons.edit"},errorIcon:{type:String,default:"$vuetify.icons.error"},editable:Boolean,rules:{type:Array,default:function(){return[]}},step:[Number,String]},data:function(){return{isActive:!1,isInactive:!0}},computed:{classes:function(){return{"v-stepper__step":!0,"v-stepper__step--active":this.isActive,"v-stepper__step--editable":this.editable,"v-stepper__step--inactive":this.isInactive,"v-stepper__step--error":this.hasError,"v-stepper__step--complete":this.complete,"error--text":this.hasError}},hasError:function(){return this.rules.some(function(e){return!0!==e()})}},mounted:function(){this.stepper&&this.stepper.register(this)},beforeDestroy:function(){this.stepper&&this.stepper.unregister(this)},methods:{click:function(e){e.stopPropagation(),this.$emit("click",e),this.editable&&this.stepClick(this.step)},toggle:function(e){this.isActive=e.toString()===this.step.toString(),this.isInactive=Number(e)<Number(this.step)}},render:function(e){var t={class:this.classes,directives:[{name:"ripple",value:this.editable}],on:{click:this.click}},a=void 0;a=this.hasError?[e(o["a"],{},this.errorIcon)]:this.complete?this.editable?[e(o["a"],{},this.editIcon)]:[e(o["a"],{},this.completeIcon)]:String(this.step);var i=!(this.hasError||!this.complete&&!this.isActive)&&this.color,r=e("span",this.setBackgroundColor(i,{staticClass:"v-stepper__step__step"}),a),s=e("div",{staticClass:"v-stepper__label"},this.$slots.default);return e("div",t,[r,s])}})},"64e7":function(e,t,a){},"6a9e":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("PageTitle",{attrs:{title:"Entrada",description:"Reconhecimento automático de carteirinhas"}}),a("GlobalEvents",{on:{keydown:e.readRegistration}}),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",[a("span",{staticStyle:{display:"none"}},[e._v(e._s(e.charactersFromReader))]),a("v-stepper",{attrs:{vertical:""},model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[a("v-stepper-step",{attrs:{complete:e.step>1,step:"1"}},[e._v("\n          Informe a matrícula\n          "),a("small",[e._v("É obrigatório o uso do leitor de código de barras")])]),a("v-stepper-content",{attrs:{step:"1"}},[a("form",{on:{submit:function(t){t.preventDefault(),e.step=2}}},[a("v-layout",{staticClass:"mb-3",attrs:{row:"",wrap:""}},[a("v-flex",[a("v-text-field",{attrs:{box:"","hide-details":"",label:"Matrícula",disabled:"","prepend-inner-icon":"credit_card"},model:{value:e.entrada.matricula,callback:function(t){e.$set(e.entrada,"matricula",t)},expression:"entrada.matricula"}})],1)],1),a("button",{staticStyle:{display:"none"},attrs:{type:"submit"}},[e._v("Próximo")])],1),a("v-btn",{attrs:{color:"primary",loading:e.step1Loading},on:{click:function(t){e.step=2}}},[e._v("Continuar")]),a("v-btn",{attrs:{flat:""},on:{click:e.reset}},[e._v("Cancelar")])],1),a("v-stepper-step",{attrs:{complete:e.step>2,step:"2"}},[e._v("Confirme os dados")]),a("v-stepper-content",{attrs:{step:"2"}},[2===e.step?["Sócio"===e.entrada.pessoa.tipo?a("div",{staticClass:"mb-3"},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",[a("v-layout",{staticClass:"mb-3",attrs:{row:"",wrap:""}},[a("v-flex",[a("v-text-field",{attrs:{id:"placa",box:"",label:"Placa","prepend-inner-icon":"directions_car",mask:"AAAAAAAA","hide-details":""},model:{value:e.entrada.veiculo,callback:function(t){e.$set(e.entrada,"veiculo",t)},expression:"entrada.veiculo"}})],1)],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md4:"","text-xs-center":""}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-img",{attrs:{src:e.entrada.pessoa.foto?e.entrada.pessoa.foto:"","aspect-ratio":"1"}}),a("v-card-title",[a("div",[a("p",{staticClass:"font-weight-bold mb-0 text-xs-center"},[e._v(e._s(e.entrada.pessoa.nome))]),a("v-divider",{staticClass:"my-2"}),a("div",[a("span",{staticClass:"text-xs-center"},[e._v(e._s(e.entrada.pessoa.matricula))])])],1)])],1)],1),e._l(e.entrada.pessoa.dependentes,function(t){return a("v-flex",{key:t.matricula,attrs:{"text-xs-center":"",xs12:"",md3:""}},[a("v-card",{attrs:{dark:!t.adimplente,color:t.adimplente?"white":"red"}},[a("v-img",{attrs:{alt:"teste",src:t.foto,"aspect-ratio":"1"}}),a("v-card-title",[a("div",[a("p",{staticClass:"font-weight-bold mb-0"},[e._v(e._s(t.nome))]),a("v-divider",{staticClass:"my-2"}),a("div",[e._v(e._s(t.matricula))])],1)])],1)],1)})],2)],1)],1)],1):a("div",{staticClass:"mb-3"},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Nome","prepend-inner-icon":"person",disabled:"","hide-details":"",box:""},model:{value:e.entrada.pessoa.nome,callback:function(t){e.$set(e.entrada.pessoa,"nome",t)},expression:"entrada.pessoa.nome"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Tipo","prepend-inner-icon":"category",disabled:"","hide-details":"",box:""},model:{value:e.entrada.pessoa.tipo,callback:function(t){e.$set(e.entrada.pessoa,"tipo",t)},expression:"entrada.pessoa.tipo"}})],1),"Credenciado"===e.entrada.pessoa.tipo?a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Autorizante","prepend-inner-icon":"verified_user",disabled:"","hide-details":"",box:""},model:{value:e.entrada.pessoa.autorizante,callback:function(t){e.$set(e.entrada.pessoa,"autorizante",t)},expression:"entrada.pessoa.autorizante"}})],1):e._e(),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Matrícula","prepend-inner-icon":"credit_card",disabled:"","hide-details":"",box:""},model:{value:e.entrada.pessoa.matricula,callback:function(t){e.$set(e.entrada.pessoa,"matricula",t)},expression:"entrada.pessoa.matricula"}})],1)],1)],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",[a("v-autocomplete",{attrs:{id:"placa",outline:"",items:e.veiculos,label:"Veículo","item-value":"id","item-text":"placa","prepend-inner-icon":"directions_car","no-data-text":"Essa pessoa não tem veículos em seu nome",hint:"Selecione um veículo cadastrado no nome de "+e.entrada.pessoa.nome,"persistent-hint":""},scopedSlots:e._u([{key:"selection",fn:function(t){return[a("strong",[e._v(e._s(t.item.modelo))]),e._v("\n                           \n                          - "+e._s(t.item.placa)+"\n                        ")]}},{key:"item",fn:function(t){return[a("strong",[e._v(e._s(t.item.modelo))]),e._v("\n                           \n                          - "+e._s(t.item.placa)+"\n                        ")]}}],null,!1,451271868),model:{value:e.entrada.veiculo,callback:function(t){e.$set(e.entrada,"veiculo",t)},expression:"entrada.veiculo"}})],1)],1)],1)],1)],1)]:e._e(),a("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.step=3}}},[e._v("Continuar")]),a("v-btn",{attrs:{flat:""},on:{click:e.reset}},[e._v("Cancelar")])],2),a("v-stepper-step",{attrs:{complete:e.step>3,step:"3"}},[e._v("Select an ad format and name ad unit")]),a("v-stepper-content",{attrs:{step:"3"}},[a("v-card",{staticClass:"mb-5",attrs:{color:"grey lighten-1",height:"200px"}}),a("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.step=4}}},[e._v("Continue")]),a("v-btn",{attrs:{flat:""}},[e._v("Cancel")])],1),a("v-stepper-step",{attrs:{step:"4"}},[e._v("View setup instructions")]),a("v-stepper-content",{attrs:{step:"4"}},[a("v-card",{staticClass:"mb-5",attrs:{color:"grey lighten-1",height:"200px"}}),a("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.step=1}}},[e._v("Continue")]),a("v-btn",{attrs:{flat:""}},[e._v("Cancel")])],1)],1)],1)],1),a("SegundaVia")],1)},i=[],r=(a("a481"),a("c97e")),s=a("9f52"),n=a("17d3"),c={name:"Entrada",components:{SegundaVia:s["a"],PageTitle:r["a"],GlobalEvents:n["a"]},data:function(){return{step1Loading:!1,entrada:{},step:1,charactersFromReader:[],veiculos:[]}},methods:{readRegistration:function(e){this.charactersFromReader.length>1&&"*"===this.charactersFromReader[this.charactersFromReader.length-1].key&&(this.charactersFromReader=[]),"Shift"!==e.key&&"Enter"!==e.key&&"!"!==e.key&&this.charactersFromReader.push({key:e.key}),"*"===e.key&&this.formatCharactersFromReader()},formatCharactersFromReader:function(){for(var e,t=0;t<this.charactersFromReader.length;t++)"*"!==this.charactersFromReader[t].key&&(e+=this.charactersFromReader[t].key);e=e.replace("undefined",""),e=e.length>8?e.substring(e.length-8,e.length):e.substring(e.length-4,e.length),this.entrada.matricula="11310000",this.getPerson()},reset:function(){this.step1Loading=!1,this.charactersFromReader=[],this.entrada={},this.step=1,this.veiculos=[]},getPerson:function(){var e=this;this.step1Loading=!0,this.$api("pessoas/matricula/".concat(this.entrada.matricula)).then(function(t){e.entrada.pessoa=t.data.pessoa,e.veiculos=t.data.veiculos,e.step1Loading=!1,e.step=2}).catch(function(t){"Esta matrícula não está cadastrada no sistema"===t.response.data?e.$crediTimaoAPI("creditimao/".concat(e.entrada.matricula)).then(function(t){e.entrada.pessoa=t.data,e.entrada.pessoa.tipo="Sócio",e.step1Loading=!1,e.step=2}).catch(function(t){e.step1Loading=!1,e.step=1,e.$store.commit("snackbar/showMessage",{text:t.response.data,color:"error"})}):(e.step1Loading=!1,e.step=1,e.$store.commit("snackbar/showMessage",{text:t.response.data,color:"error"}))})}}},l=c,d=a("2877"),v=a("6544"),p=a.n(v),m=a("c6a6"),u=a("8336"),h=a("b0af"),f=a("12b2"),g=a("ce7e"),b=a("0e8f"),x=a("adda"),_=a("a722"),y=a("7e85"),w=a("e516"),k=a("56a4"),C=a("2677"),T=Object(d["a"])(l,o,i,!1,null,"0558582c",null);t["default"]=T.exports;p()(T,{VAutocomplete:m["a"],VBtn:u["a"],VCard:h["a"],VCardTitle:f["a"],VDivider:g["a"],VFlex:b["a"],VImg:x["a"],VLayout:_["a"],VStepper:y["a"],VStepperContent:w["a"],VStepperStep:k["a"],VTextField:C["a"]})},7056:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("PageTitle",{attrs:{title:"Saída",description:"Reconhecimento automático de carteirinhas"}}),e.saida.matricula?e._e():a("v-layout",{attrs:{row:"",wrap:"","justify-center":""}},[a("v-flex",{staticClass:"hidden-sm-and-down",attrs:{xs12:"",sm5:""}},[a("v-img",{attrs:{src:e.imageSrc}})],1),a("v-flex",{attrs:{"text-xs-center":"",xs12:"",sm7:""}},[a("v-layout",{attrs:{row:"",wrap:"","justify-center":""}},[a("v-flex",{attrs:{xs12:""}},[a("h1",{staticClass:"display-1"},[e._v("Aguardando a leitura da carteirinha...")]),a("p",[e._v("Quando identificar a leitura da carteirinha, será solicitada a placa do veículo")])]),a("v-flex",{staticClass:"mt-3",attrs:{xs12:"",sm9:""}},[a("v-text-field",{attrs:{"return-masked-value":"",mask:"nnnnnn-nn",id:"matricula",box:"","prepend-inner-icon":"credit_card","hide-details":"",disabled:"",label:"Matrícula"},model:{value:e.saida.matricula,callback:function(t){e.$set(e.saida,"matricula",t)},expression:"saida.matricula"}})],1)],1)],1)],1),a("SegundaVia")],1)},i=[],r=a("c97e"),s=a("9f52"),n={name:"Entrada",components:{SegundaVia:s["a"],PageTitle:r["a"]},data:function(){return{imageSrc:a("3b2f"),saida:{}}},methods:{reset:function(){this.saida={}}},mounted:function(){document.getElementById("matricula").focus()}},c=n,l=a("2877"),d=a("6544"),v=a.n(d),p=a("0e8f"),m=a("adda"),u=a("a722"),h=a("2677"),f=Object(l["a"])(c,o,i,!1,null,"69877b1c",null);t["default"]=f.exports;v()(f,{VFlex:p["a"],VImg:m["a"],VLayout:u["a"],VTextField:h["a"]})},"7e85":function(e,t,a){"use strict";a("bff6");var o=a("94ab"),i=a("6a18"),r=a("58df"),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e};t["a"]=Object(r["a"])(Object(o["b"])("stepper"),i["a"]).extend({name:"v-stepper",provide:function(){return{stepClick:this.stepClick,isVertical:this.vertical}},props:{nonLinear:Boolean,altLabels:Boolean,vertical:Boolean,value:[Number,String]},data:function(){return{inputValue:null,isBooted:!1,steps:[],content:[],isReverse:!1}},computed:{classes:function(){return s({"v-stepper":!0,"v-stepper--is-booted":this.isBooted,"v-stepper--vertical":this.vertical,"v-stepper--alt-labels":this.altLabels,"v-stepper--non-linear":this.nonLinear},this.themeClasses)}},watch:{inputValue:function(e,t){this.isReverse=Number(e)<Number(t);for(var a=this.steps.length;--a>=0;)this.steps[a].toggle(this.inputValue);for(var o=this.content.length;--o>=0;)this.content[o].toggle(this.inputValue,this.isReverse);this.$emit("input",this.inputValue),t&&(this.isBooted=!0)},value:function(){var e=this;this.$nextTick(function(){return e.inputValue=e.value})}},mounted:function(){this.inputValue=this.value||this.steps[0].step||1},methods:{register:function(e){"v-stepper-step"===e.$options.name?this.steps.push(e):"v-stepper-content"===e.$options.name&&(e.isVertical=this.vertical,this.content.push(e))},unregister:function(e){"v-stepper-step"===e.$options.name?this.steps=this.steps.filter(function(t){return t!==e}):"v-stepper-content"===e.$options.name&&(e.isVertical=this.vertical,this.content=this.content.filter(function(t){return t!==e}))},stepClick:function(e){var t=this;this.$nextTick(function(){return t.inputValue=e})}},render:function(e){return e("div",{class:this.classes},this.$slots.default)}})},"8a91":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{outline:"none !important"},attrs:{id:"myDiv",tabindex:"0"},on:{keydown:e.keyMonitor}},[a("GlobalEvents",{on:{keydown:e.readRegistration}}),a("v-dialog",{attrs:{persistent:"",width:"900"},model:{value:e.divida.modal,callback:function(t){e.$set(e.divida,"modal",t)},expression:"divida.modal"}},[a("v-card",[a("v-card-title",{staticClass:"headline primary white--text text-uppercase"},[e._v(e._s(e.divida.dataEntrada?"Cobrança pendente":"Horário limite excedido"))]),a("v-card-text",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("h1",[e._v(e._s(e._f("formatPrice")(e.divida.valor)))]),a("h2",[e._v(e._s(e.divida.selos)+" selos")]),e.divida.dataEntrada?a("span",[e._v("Referente ao período de "+e._s(e._f("formatDate")(e.divida.dataEntrada))+" a "+e._s(e._f("formatDate")(e.divida.dataSaida)))]):e._e()]),a("v-flex",{attrs:{xs12:""}},[e._v("Cobrança pelas "+e._s(e.divida.horasUteis)+" horas úteis")])],1)],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-select",{attrs:{"prepend-inner-icon":"attach_money",items:["Dinheiro","Selo Físico","Selo Digital","Cartão de débito","Cartão de crédito","Pendência de Leitura de Carteirinha"],label:"Forma de pagamento"},model:{value:e.evento.formaPagamento,callback:function(t){e.$set(e.evento,"formaPagamento",t)},expression:"evento.formaPagamento"}}),e.getUser.simpleMode||"Selo Digital"!==e.evento.formaPagamento?e._e():a("v-flex",[a("v-alert",{staticClass:"mb-3",attrs:{value:!0,type:"info"}},[e._v("Para confirmar o pagamento, o sócio deve passar a carteirinha no leitor.")])],1),e.getUser.simpleMode||"Pendência de Leitura de Carteirinha"!==e.evento.formaPagamento?e._e():a("v-flex",[a("v-alert",{staticClass:"mb-3",attrs:{value:!0,type:"warning"}},[e._v("\n                Ao selecionar a forma de pagamento\n                "),a("strong",[e._v("Pendência de Leitura de Carteirinha")]),e._v(", você concorda com os seguintes passos automáticos que o sistema realizará:\n                "),a("ol",{staticClass:"mt-4"},[a("li",[e._v("Será registrada uma movimentação paga com Pendência de Leitura de Carteirinha;")]),a("li",[e._v("A movimentação será ajustada para Selo Digital e será debitado da carteira de selos digitais do sócio;")]),a("li",[e._v("Uma ocorrência será aberta automaticamente para documentar que este método de pagamento foi utilizado;")]),a("li",[e._v("Um e-mail será enviado para os administradores do sistema como um alerta;")]),a("li",[e._v("O veículo será liberado normalmente como ocorre em outras formas de pagamento.")])])])],1)],1)],1)],1),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{color:"secondary",flat:"",loading:e.requestingToApi},on:{click:function(t){return e.reset(!0)}}},[e._v("Cancelar")]),a("v-spacer"),a("v-btn",{attrs:{color:"primary",depressed:"",loading:e.requestingToApi,disabled:!e.evento.formaPagamento||"Selo Digital"===e.evento.formaPagamento||e.requestingToApi},on:{click:e.done}},[e._v("Finalizar")])],1)],1)],1),a("v-layout",{attrs:{row:"",wrap:""}},[a("div",{staticClass:"deactive",attrs:{id:"loading_area"}},[a("img",{staticClass:"loading-img",attrs:{src:"/root/estacionamento/frontend/src/assets/loading.gif"}})]),a("v-flex",{attrs:{xs12:""}},[e.caixa.estado?a("v-alert",{attrs:{value:!0,type:"error"}},[e._v("Atenção! Não é possível utilizar o sistema sem um caixa aberto. Abra um novo caixa.")]):a("v-stepper",{model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[a("v-stepper-header",{style:"background-color: "+("Entrada"===e.evento.evento?"rgba(0, 0, 255, 0.2)":"Saída"===e.evento.evento?"rgba(255, 0, 0, 0.2)":"rgba(0, 0, 0, 0)")+";"},[a("v-stepper-step",{attrs:{complete:e.step>1,step:"1"}},[e._v("Selecione o tipo de evento")]),a("v-divider"),a("v-stepper-step",{attrs:{complete:e.step>2,step:"2"}},[e._v("Informe a placa e/ou matrícula")]),a("v-divider"),a("v-stepper-step",{attrs:{complete:e.step>3,step:"3"}},[e._v("Verifique os dados")])],1),a("v-stepper-items",[a("v-stepper-content",{attrs:{step:"1"}},[a("v-layout",{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[a("v-btn",{attrs:{id:"btn-entrada",depressed:"",disabled:e.step>1,color:"primary",large:""},on:{click:function(t){return e.setEvent("Entrada")}}},[e._v("Entrada")]),a("v-btn",{attrs:{id:"btn-saida",depressed:"",disabled:e.step>1,color:"red",dark:"",large:""},on:{click:function(t){return e.setEvent("Saída")}}},[e._v("Saída")])],1)],1),a("v-stepper-content",{attrs:{step:"2"}},[a("v-layout",{attrs:{"align-center":"","justify-center":"",row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"Entrada"===e.evento.evento}},[a("v-text-field",{attrs:{autofocus:"",label:"Placa",disabled:"BICICLETA"===e.evento.placa,mask:"NNNNNNNNN"},model:{value:e.evento.placa,callback:function(t){e.$set(e.evento,"placa",t)},expression:"evento.placa"}})],1),"Entrada"===e.evento.evento?a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{attrs:{"return-masked-value":"",mask:"nnnnnn-nn",label:"Matrícula",id:"campo-matricula"},model:{value:e.evento.matricula,callback:function(t){e.$set(e.evento,"matricula",t)},expression:"evento.matricula"}})],1):e._e(),a("v-flex",{attrs:{xs12:"",sm6:""}},["Entrada"===e.evento.evento?a("v-checkbox",{staticClass:"my-0 py-0",attrs:{label:"Moto"},model:{value:e.motocicleta,callback:function(t){e.motocicleta=t},expression:"motocicleta"}}):e._e()],1),a("v-flex",{attrs:{xs12:"",sm6:""}},["Entrada"===e.evento.evento?a("v-checkbox",{staticClass:"my-0 py-0",attrs:{id:"btn-bicicleta",label:"Bicicleta"},model:{value:e.bicicleta,callback:function(t){e.bicicleta=t},expression:"bicicleta"}}):e._e()],1)],1),a("v-divider",{staticClass:"mb-2"}),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-btn",{attrs:{disabled:!e.evento.placa,color:"primary",depressed:"",id:"continue-1"},on:{click:e.next}},[e._v("Continuar")]),"Entrada"===e.evento.evento?a("v-btn",{attrs:{disabled:!e.evento.placa,color:"primary",id:"check-multiple-1",flat:""},on:{click:function(t){e.multiplasMatriculasModal=!0}}},[e._v("Verificar múltiplas matrículas")]):e._e(),a("v-btn",{attrs:{flat:"",id:"reset-1",loading:e.requestingToApi},on:{click:function(t){return e.reset(!0)}}},[e._v("Cancelar")])],1)],1)],1),a("v-stepper-content",{attrs:{step:"3"}},[a("v-layout",{attrs:{"justify-center":"","align-center":"",row:"",wrap:""}},[e.evento.matricula?a("v-flex",{attrs:{xs6:"",sm2:""}},[e.evento.matricula?a("v-flex",{attrs:{xs12:""}},[a("v-img",{attrs:{src:e.getProfilePicture}})],1):e._e()],1):e._e(),a("v-flex",{attrs:{xs10:!!e.evento.matricula,xs12:!e.evento.matricula}},[a("v-layout",{attrs:{row:"",wrap:""}},["Sócio"===e.evento.tipo?a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{"prepend-inner-icon":"credit_card",value:e.evento.matricula,label:"Matrícula",disabled:""}})],1):e._e(),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{attrs:{"prepend-inner-icon":"person",value:e.evento.nome,label:"Nome do motorista",disabled:""}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{attrs:{"prepend-inner-icon":"accessibility",value:e.evento.tipo,label:"Tipo de pessoa",disabled:""}})],1),"Credenciado"===e.evento.tipo?a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{"prepend-inner-icon":"verified_user",value:e.evento.autorizante,label:"Autorizante",disabled:""}})],1):e._e(),a("v-flex",{attrs:{xs12:"",sm4:e.evento.modelo}},[a("v-text-field",{attrs:{"prepend-inner-icon":"directions_car",value:e.evento.placa,label:"Placa do veículo",id:"campo-placa",disabled:""}})],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[e.evento.matricula?e._e():a("v-text-field",{attrs:{"prepend-inner-icon":"bookmark",value:e.evento.modelo,label:"Modelo do veículo",disabled:""}})],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[e.evento.matricula?e._e():a("v-text-field",{attrs:{"prepend-inner-icon":"color_lens",value:e.evento.cor,label:"Cor do veículo",disabled:""}})],1),e.evento.matricula?a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm4:""}},[a("v-text-field",{attrs:{"prepend-inner-icon":"card_giftcard",value:e.saldoSelosDigitais.cortesia,label:"Selos de cortesia",error:e.saldoSelosDigitais.cortesia<=2,hint:e.saldoSelosDigitais.cortesia<=2?"Saldo baixo de selos digitais de cortesia":"","persistent-hint":e.saldoSelosDigitais.cortesia<=2,readonly:""}})],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[a("v-text-field",{attrs:{"prepend-inner-icon":"credit_card",value:e.saldoSelosDigitais.normalMoto,label:"Selos digitais de motocicleta",error:e.saldoSelosDigitais.normalMoto<=2,hint:e.saldoSelosDigitais.normalMoto<=2?"Saldo baixo de selos digitais de motocicleta":"","persistent-hint":e.saldoSelosDigitais.normalMoto<=2,readonly:""}})],1),a("v-flex",{attrs:{xs12:"",sm4:""}},[a("v-text-field",{attrs:{"prepend-inner-icon":"credit_card",value:e.saldoSelosDigitais.normalCarro,label:"Selos digitais de carro",error:e.saldoSelosDigitais.normalCarro<=2,hint:e.saldoSelosDigitais.normalCarro<=2?"Saldo baixo de selos digitais de carro":"","persistent-hint":e.saldoSelosDigitais.normalCarro<=2,readonly:""}})],1)],1):e._e()],1)],1)],1),a("v-layout",{attrs:{row:"",wrap:""}},e._l(e.evento.dependentes,function(t){return a("v-flex",{key:t.cod_dep,attrs:{xs12:"",sm3:""}},[a("v-card",[a("v-layout",[a("v-flex",{attrs:{xs6:"",sm5:""}},[a("v-img",{attrs:{src:t.foto,contain:""}}),t.valido?e._e():a("div",{staticClass:"overlay"},[a("div",{staticClass:"text"},[e._v("Inadimplente")])])],1),a("v-flex",{attrs:{xs7:""}},[a("v-card-title",{attrs:{"primary-title":""}},[a("div",[a("div",{staticClass:"headline"},[e._v(e._s(t.nome))]),a("div",[e._v(e._s(t.matricula_completa))])])])],1)],1)],1)],1)}),1),a("v-divider",{staticClass:"my-2"}),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-btn",{attrs:{id:"continue-2",depressed:"",color:"primary",loading:e.requestingToApi},on:{click:e.next}},[e._v("Finalizar")]),a("v-btn",{attrs:{id:"back-2",flat:"",color:"secondary",loading:e.requestingToApi},on:{click:e.reset}},[e._v("Voltar")]),a("v-btn",{attrs:{flat:"",id:"reset-2",loading:e.requestingToApi},on:{click:function(t){return e.reset(!0)}}},[e._v("Cancelar")])],1)],1)],1)],1)],1)],1),a("v-dialog",{attrs:{width:"700"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline error white--text text-uppercase"},[e._v(e._s(e.bloqueio.tipo+" "+e.bloqueio.valor+" está bloqueada"))]),a("v-card-text",[a("p",[e._v("Bloqueio realizado em "+e._s(e._f("formatDate")(e.bloqueio.data)))]),a("p",[e._v("O motivo do bloqueio é o seguinte:")]),a("p",[a("strong",[e._v(e._s(e.bloqueio.motivo))])])]),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{color:"secondary",flat:"",loading:e.requestingToApi},on:{click:function(t){return e.reset(!0)}}},[e._v("Cancelar")])],1)],1)],1),a("v-dialog",{attrs:{width:"800"},model:{value:e.multiplasMatriculasModal,callback:function(t){e.multiplasMatriculasModal=t},expression:"multiplasMatriculasModal"}},[a("v-card",[a("v-card-title",{staticClass:"headline primary white--text"},[e._v("Verificar múltiplas matrículas")]),a("v-card-text",[e._l(e.matriculas.qtd,function(t){return a("v-layout",{key:t,staticClass:"mb-2",attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{"prepend-inner-icon":"credit_card",label:1===t?"Matrícula do motorista":"Matrícula do acompanhante "+t,"return-masked-value":"",mask:"nnnnnn-nn"},model:{value:e.matriculas.lista[t],callback:function(a){e.$set(e.matriculas.lista,t,a)},expression:"matriculas.lista[n]"}})],1)],1)}),a("v-layout",{attrs:{row:"",wrap:"","align-center":""}},e._l(e.matriculas.resultados,function(t){return a("v-flex",{key:t.registration,staticClass:"ma-2",attrs:{xs12:"",sm4:""}},[a("v-card",[a("v-img",{attrs:{src:t.profilePicture,"aspect-ratio":"1"}}),a("v-card-title",[a("div",[a("h3",{staticClass:"headline mb-0"},[e._v(e._s(t.nome))]),a("div",[e._v(e._s(t.registration))])])])],1)],1)}),1)],2),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{color:"secondary",flat:"",loading:e.requestingToApi},on:{click:function(t){e.multiplasMatriculasModal=!1}}},[e._v("Cancelar")]),a("v-spacer"),e.matriculas.qtd>1?a("v-btn",{attrs:{color:"error",id:"multiple-minus",flat:""},on:{click:function(t){e.matriculas.qtd--}}},[e._v("Remover matrícula")]):e._e(),a("v-btn",{attrs:{color:"primary",id:"multiple-plus",flat:""},on:{click:function(t){e.matriculas.qtd++}}},[e._v("Adicionar matrícula")]),a("v-btn",{attrs:{color:"primary",flat:"",loading:e.requestingToApi},on:{click:e.verifyMultipleRegistrations}},[e._v("Verificar")]),a("v-btn",{attrs:{color:"primary",depressed:"",disabled:!e.evento.matricula,loading:e.requestingToApi},on:{click:e.next}},[e._v("Continuar")])],1)],1)],1)],1),a("SegundaVia")],1)},i=[],r=(a("8e6e"),a("ac6a"),a("456d"),a("a481"),a("bd86")),s=a("17d3"),n=a("9f52"),c=a("2f62");function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,o)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(a,!0).forEach(function(t){Object(r["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var v={name:"MovimentacaoManual",components:{SegundaVia:n["a"],GlobalEvents:s["a"]},data:function(){return{registrationVerification:"",saldoSelosDigitais:{normalCarro:0,normalMoto:0,cortesia:0},requestingToApi:!1,matricula:"",charactersFromReader:[],divida:{modal:!1,valor:0,selos:0,horas:0,horasUteis:0,dataEntrada:null,consultado:!1},bicicleta:!1,motocicleta:!1,pagoNaEntrada:!1,caixa:{},step:0,evento:{},precos:{},primeiraEtapaValida:!1,dialog:!1,multiplasMatriculasModal:!1,matriculas:{lista:[],qtd:1,resultados:[],verificado:!1},bloqueio:{}}},watch:{bicicleta:function(e,t){e?(this.motocicleta=!1,this.evento.placa="BICICLETA"):this.evento.placa=""},motocicleta:function(e,t){e&&(this.bicicleta=!1,"BICICLETA"===this.evento.placa&&(this.evento.placa=""))},evento:function(e){e.formaPagamento&&"Selo Digital"===e.formaPagamento&&window.sendToElectron("readRegistration")}},created:function(){var e=this;this.loadLastCashbox(),this.loadPrices(),document.addEventListener("message",function(t){for(var a=t.data,o="!".concat(a,"*"),i=0;i<o.length;i++)e.readRegistration({key:o[i]})})},computed:d({},Object(c["b"])("user",["getUser"]),{getProfilePicture:function(){return"http://sccp14/"+this.evento.matricula.replace("-","")+".jpg"}}),methods:{verifyRegistrationToPay:function(){this.registrationVerification.substring(0,6)===this.evento.matricula.substring(0,6)?this.requestingToApi||this.done():this.$store.commit("snackbar/showMessage",{text:"Matrículas não coindidem. A matrícula digitada é ".concat(this.registrationVerification,". Deveria apresentar a matrícula ").concat(this.evento.matricula.replace("-","")),color:"error"})},readRegistration:function(e){(3===this.step&&this.divida.modal||2===this.step&&"Entrada"===this.evento.evento)&&("!"===e.key&&(this.charactersFromReader=[]),this.charactersFromReader.length>1&&"*"===this.charactersFromReader[this.charactersFromReader.length-1].key&&(this.charactersFromReader=[]),"Shift"!==e.key&&"Enter"!==e.key&&"!"!==e.key&&this.charactersFromReader.push({key:e.key}),"*"===e.key&&this.formatCharactersFromReader())},formatCharactersFromReader:function(){for(var e,t=0;t<this.charactersFromReader.length;t++)"*"!==this.charactersFromReader[t].key&&(e+=this.charactersFromReader[t].key);e=e.replace("undefined",""),e=e.length>8?e.substring(e.length-8,e.length):e.substring(e.length-6,e.length),2===this.step&&"Entrada"===this.evento.evento?(this.evento.matricula=e,this.bicicleta=!this.bicicleta,this.bicicleta=!this.bicicleta):(this.matricula=e,"Selo Digital"===this.evento.formaPagamento&&(this.matricula.substring(0,6)===this.evento.matricula.substring(0,6)?this.requestingToApi||this.done():this.$store.commit("snackbar/showMessage",{text:"Matrículas não coindidem. A matrícula apresentada no cartão é ".concat(this.matricula,". Deveria apresentar a matrícula ").concat(this.evento.matricula.replace("-","")),color:"error"})))},loadLastCashbox:function(){var e=this;this.requestingToApi=!0,this.$api("cash").then(function(t){e.caixa=t.data.caixa,e.requestingToApi=!1}).catch(function(t){console.log(t.response,t),e.requestingToApi=!1,e.$store.commit("snackbar/showMessage",{text:t.response.data,color:"error"})})},verifyMultipleRegistrations:function(){var e=this;this.matriculas.resltados=[];for(var t=function(t){var a=e.matriculas.lista[t];e.requestingToApi=!0,e.$api("omni/multiple/".concat(a)).then(function(o){1===t&&(e.evento.matricula=a),o.data.message?e.$store.commit("snackbar/showMessage",{text:o.data.message,color:"error"}):e.matriculas.resultados.push(d({registration:a},o.data)),e.requestingToApi=!1})},a=1;a<this.matriculas.lista.length;a++)t(a);this.matriculas.verificado=!0},loadPrices:function(){var e=this;this.requestingToApi=!0,this.$api("configuracoes").then(function(t){e.precos=t.data,e.requestingToApi=!1}).catch(function(t){console.log(t.response,t),e.requestingToApi=!1,e.$store.commit("snackbar/showMessage",{text:t.response.data,color:"error"})})},keyMonitor:function(e){var t=e.key,a=String(document.activeElement);"v"===t&&"[object HTMLInputElement]"!==a&&(document.getElementById("check-multiple-1").click(),document.getElementById("myDiv").focus()),"1"===t&&"[object HTMLInputElement]"!==a?(document.getElementById("btn-entrada").click(),document.getElementById("myDiv").focus()):"2"===t&&4!==this.step&&"[object HTMLInputElement]"!==a?(document.getElementById("btn-saida").click(),document.getElementById("myDiv").focus()):"Enter"===t?2===this.step?(document.getElementById("continue-1").click(),document.getElementById("myDiv").focus()):3==this.step?(document.getElementById("continue-2").click(),document.getElementById("myDiv").focus()):4===this.step&&(document.getElementById("continue-3").click(),document.getElementById("myDiv").focus()):"m"===t?2===this.step&&"[object HTMLInputElement]"!==a&&(this.motocicleta=!this.motocicleta,document.getElementById("myDiv").focus()):"b"===t?2===this.step&&"[object HTMLInputElement]"!==a&&(this.bicicleta=!this.bicicleta,document.getElementById("myDiv").focus()):"Escape"===t?2===this.step?(document.getElementById("back-1").click(),document.getElementById("myDiv").focus()):3==this.step?(document.getElementById("back-2").click(),document.getElementById("myDiv").focus()):4===this.step?(document.getElementById("back-3").click(),document.getElementById("myDiv").focus()):5===this.step&&(document.getElementById("back-4").click(),document.getElementById("myDiv").focus()):"Delete"===t?2===this.step?(document.getElementById("reset-1").click(),document.getElementById("myDiv").focus()):3==this.step?(document.getElementById("reset-2").click(),document.getElementById("myDiv").focus()):4===this.step?(document.getElementById("reset-3").click(),document.getElementById("myDiv").focus()):5===this.step&&(document.getElementById("reset-4").click(),document.getElementById("myDiv").focus()):"a"===t&&4===this.step?(document.getElementById("avulso").click(),document.getElementById("myDiv").focus()):"s"===t&&4===this.step?(document.getElementById("selo").click(),document.getElementById("myDiv").focus()):"m"===t&&4===this.step&&(document.getElementById("motorcycle").click(),document.getElementById("myDiv").focus())},setEvent:function(e){this.evento.evento=e,this.step=2},reset:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.registrationVerification="",this.charactersFromReader=[],this.matricula="",this.divida={modal:!1,valor:0,selos:0,horas:0,horasUteis:0,dataEntrada:null,consultado:!1},this.bicicleta=!1,this.motocicleta=!1,this.pagoNaEntrada=!1,this.evento={evento:e?"":this.evento.evento},this.step=e?1:2,this.primeiraEtapaValida=!1,this.dialog=!1,this.multiplasMatriculasModal=!1,this.matriculas={lista:[],qtd:1,resultados:[],verificado:!1},this.bloqueio={},this.saldoSelosDigitais={normalCarro:0,normalMoto:0,cortesia:0}},done:function(){var e,t,a=this;this.requestingToApi||("Entrada"===this.evento.evento?this.divida.consultado&&this.evento.formaPagamento?(e="Selo Físico"===this.evento.formaPagamento||"Selo Digital"===this.evento.formaPagamento||"Pendência de Leitura de Carteirinha"===this.evento.formaPagamento?this.divida.selos:this.divida.valor,"Selo Digital"===this.evento.formaPagamento?(this.requestingToApi=!0,this.$crediTimaoAPI.post("estacionamento/debito/".concat(this.evento.matricula.replace("-","")),{quantia:e,operador:this.getUser.username,porte:this.motocicleta||this.bicicleta?this.motocicleta?"Motocicleta":"Bicicleta":"Carro"}).then(function(t){a.evento.saldoRestante=t.data,a.requestingToApi=!0,a.$api.post("entries",Object(r["a"])({ambiente:a.getUser.ambiente,pagouNaEntrada:"mobile"===a.getUser.ambiente||a.divida.valor>0,veiculo:a.evento.id,matricula:a.evento.matricula,placa:a.evento.placa,nome:a.evento.nome,caixa:a.caixa.id,movimentacao:"pagamento",pagamento:a.evento.formaPagamento,evento:"entrada",tipo:a.evento.tipo,valor:e,porte:a.motocicleta||a.bicicleta?a.motocicleta?"Motocicleta":"Bicicleta":"Carro",operador:a.getUser.username,local:a.getUser.local},"ambiente",a.getUser.ambiente)).then(function(){"Sócio"===a.evento.tipo&&(a.evento.modoRetorno&&("Selo Físico"===a.evento.formaPagamento||"Selo Digital"===a.evento.formaPagamento||"Pendência de Leitura de Carteirinha"===a.evento.formaPagamento?a.evento.price=a.divida.selos:a.evento.price=a.divida.valor),window.sendToElectron(d({},a.evento,{precos:d({},a.precos)})),a.pagoNaEntrada&&setTimeout(function(){window.sendToElectron(d({},a.evento,{precos:d({},a.precos)}))},3e3)),a.$store.commit("snackbar/showMessage",{text:"Entrada cadastrada",color:"primary"}),a.reset(),a.requestingToApi=!1}).catch(function(e){console.log(e.response,e),a.requestingToApi=!1,"unauthorized"===e.response.data.error?(a.bloqueio.motivo=e.response.data.reason,a.bloqueio.valor=e.response.data.value,a.bloqueio.tipo=e.response.data.type,a.bloqueio.data=e.response.data.created_at,a.dialog=!0):"afterTheCutoffTime"===e.response.data.error?(a.pagoNaEntrada=!0,a.evento.price=e.response.data.price):a.$store.commit("snackbar/showMessage",{text:e.response.data,color:"error"}),a.requestingToApi=!1}),a.requestingToApi=!1}).catch(function(e){console.log(e.response,e),a.requestingToApi=!1,a.$store.commit("snackbar/showMessage",{text:e.response.data,color:"error"}),a.requestingToApi=!1})):(this.requestingToApi=!0,this.$api.post("entries",Object(r["a"])({ambiente:this.getUser.ambiente,pagouNaEntrada:"mobile"===this.getUser.ambiente||this.divida.valor>0,veiculo:this.evento.id,matricula:this.evento.matricula,placa:this.evento.placa,nome:this.evento.nome,caixa:this.caixa.id,movimentacao:"pagamento",pagamento:this.evento.formaPagamento,evento:"entrada",tipo:this.evento.tipo,valor:e,porte:this.motocicleta||this.bicicleta?this.motocicleta?"Motocicleta":"Bicicleta":"Carro",operador:this.getUser.username,local:this.getUser.local},"ambiente",this.getUser.ambiente)).then(function(){"Sócio"===a.evento.tipo&&(a.evento.modoRetorno&&("Selo Físico"===a.evento.formaPagamento||"Selo Digital"===a.evento.formaPagamento||"Pendência de Leitura de Carteirinha"===a.evento.formaPagamento?a.evento.price=a.divida.selos:a.evento.price=a.divida.valor),window.sendToElectron(d({},a.evento,{precos:d({},a.precos)})),a.pagoNaEntrada&&setTimeout(function(){window.sendToElectron(d({},a.evento,{precos:d({},a.precos)}))},3e3)),a.$store.commit("snackbar/showMessage",{text:"Entrada cadastrada",color:"primary"}),a.reset(),a.requestingToApi=!1}).catch(function(e){console.log(e.response,e),a.requestingToApi=!1,"unauthorized"===e.response.data.error?(a.bloqueio.motivo=e.response.data.reason,a.bloqueio.valor=e.response.data.value,a.bloqueio.tipo=e.response.data.type,a.bloqueio.data=e.response.data.created_at,a.dialog=!0):"afterTheCutoffTime"===e.response.data.error?(a.pagoNaEntrada=!0,a.evento.price=e.response.data.price):a.$store.commit("snackbar/showMessage",{text:e.response.data,color:"error"}),a.requestingToApi=!1}))):(this.requestingToApi=!0,this.$api.post("calcularPrecos",{ambiente:this.getUser.ambiente,local:this.getUser.local,placa:this.evento.placa,evento:"entrada",porte:this.motocicleta||this.bicicleta?this.motocicleta?"Motocicleta":"Bicicleta":"Carro",tipo:this.evento.tipo,operador:this.getUser.username}).then(function(e){var t;(e.data.valorRetorno&&(a.evento.modoRetorno=!0,a.evento.price=e.data.valorRetorno,a.evento.formaPagamento=e.data.pagamento),e.data.valor>0)?(a.divida.modal=!0,a.divida.valor=e.data.valor,a.divida.selos=e.data.selos,a.divida.horas=e.data.horas,a.divida.horasUteis=e.data.horasUteis,a.divida.dataEntrada=e.data.dataEntrada,a.divida.dataSaida=e.data.dataSaida,a.divida.consultado=!0):(t="Selo Físico"===a.evento.formaPagamento||"Selo Digital"===a.evento.formaPagamento||"Pendência de Leitura de Carteirinha"===a.evento.formaPagamento?a.divida.selos:a.divida.valor,"Selo Digital"===a.evento.formaPagamento?(a.requestingToApi=!0,a.$crediTimaoAPI.post("estacionamento/debito/".concat(a.evento.matricula.replace("-","")),{quantia:t,operador:a.getUser.username,porte:a.motocicleta||a.bicicleta?a.motocicleta?"Motocicleta":"Bicicleta":"Carro"}).then(function(e){a.evento.saldoRestante=e.data,a.requestingToApi=!0,a.$api.post("entries",Object(r["a"])({ambiente:a.getUser.ambiente,pagouNaEntrada:"mobile"===a.getUser.ambiente||a.divida.valor>0,veiculo:a.evento.id,matricula:a.evento.matricula,placa:a.evento.placa,nome:a.evento.nome,caixa:a.caixa.id,movimentacao:"pagamento",pagamento:a.evento.formaPagamento,evento:"entrada",tipo:a.evento.tipo,valor:t,porte:a.motocicleta||a.bicicleta?a.motocicleta?"Motocicleta":"Bicicleta":"Carro",operador:a.getUser.username,local:a.getUser.local},"ambiente",a.getUser.ambiente)).then(function(){"Sócio"===a.evento.tipo&&(a.evento.modoRetorno||("Selo Físico"===a.evento.formaPagamento||"Selo Digital"===a.evento.formaPagamento?a.evento.price=a.divida.selos:a.evento.price=a.divida.valor),window.sendToElectron(d({},a.evento,{precos:d({},a.precos)})),a.pagoNaEntrada&&setTimeout(function(){window.sendToElectron(d({},a.evento,{precos:d({},a.precos)}))},3e3)),a.$store.commit("snackbar/showMessage",{text:"Entrada cadastrada",color:"primary"}),a.reset(),a.requestingToApi=!1}).catch(function(e){console.log(e.response,e),a.requestingToApi=!1,"unauthorized"===e.response.data.error?(a.bloqueio.motivo=e.response.data.reason,a.bloqueio.valor=e.response.data.value,a.bloqueio.tipo=e.response.data.type,a.bloqueio.data=e.response.data.created_at,a.dialog=!0):"afterTheCutoffTime"===e.response.data.error?(a.pagoNaEntrada=!0,a.evento.price=e.response.data.price):a.$store.commit("snackbar/showMessage",{text:e.response.data,color:"error"}),a.requestingToApi=!1}),a.requestingToApi=!1}).catch(function(e){console.log(e.response,e),a.requestingToApi=!1,a.$store.commit("snackbar/showMessage",{text:e.response.data,color:"error"})})):(a.requestingToApi=!0,a.$api.post("entries",Object(r["a"])({ambiente:a.getUser.ambiente,pagouNaEntrada:"mobile"===a.getUser.ambiente||a.divida.valor>0,veiculo:a.evento.id,matricula:a.evento.matricula,placa:a.evento.placa,nome:a.evento.nome,caixa:a.caixa.id,movimentacao:"pagamento",pagamento:a.evento.formaPagamento,evento:"entrada",tipo:a.evento.tipo,valor:t,porte:a.motocicleta||a.bicicleta?a.motocicleta?"Motocicleta":"Bicicleta":"Carro",operador:a.getUser.username,local:a.getUser.local},"ambiente",a.getUser.ambiente)).then(function(){"Sócio"===a.evento.tipo&&(a.evento.modoRetorno||("Selo Físico"===a.evento.formaPagamento||"Selo Digital"===a.evento.formaPagamento||"Pendência de Leitura de Carteirinha"===a.evento.formaPagamento?a.evento.price=a.divida.selos:a.evento.price=a.divida.valor),window.sendToElectron(d({},a.evento,{precos:d({},a.precos)})),a.pagoNaEntrada&&setTimeout(function(){window.sendToElectron(d({},a.evento,{precos:d({},a.precos)}))},3e3)),a.$store.commit("snackbar/showMessage",{text:"Entrada cadastrada",color:"primary"}),a.reset(),a.requestingToApi=!1}).catch(function(e){console.log(e.response,e),a.requestingToApi=!1,"unauthorized"===e.response.data.error?(a.bloqueio.motivo=e.response.data.reason,a.bloqueio.valor=e.response.data.value,a.bloqueio.tipo=e.response.data.type,a.bloqueio.data=e.response.data.created_at,a.dialog=!0):"afterTheCutoffTime"===e.response.data.error?(a.pagoNaEntrada=!0,a.evento.price=e.response.data.price):a.$store.commit("snackbar/showMessage",{text:e.response.data,color:"error"}),a.requestingToApi=!1})));a.requestingToApi=!1}).catch(function(e){console.log(e.response,e),a.requestingToApi=!1,a.$store.commit("snackbar/showMessage",{text:e.response.data,color:"error"}),a.requestingToApi=!1})):this.divida.consultado&&this.evento.formaPagamento?(t="Selo Físico"===this.evento.formaPagamento||"Selo Digital"===this.evento.formaPagamento||"Pendência de Leitura de Carteirinha"===this.evento.formaPagamento?this.divida.selos:this.divida.valor,"Selo Digital"===this.evento.formaPagamento?(this.requestingToApi=!0,this.$crediTimaoAPI.post("estacionamento/debito/".concat(this.evento.matricula.replace("-","")),{operador:this.getUser.username,quantia:t,porte:this.evento.porte}).then(function(e){a.evento.saldoRestante=e.data,a.requestingToApi=!0,a.$api.post("exits",{identry:a.evento.identry,veiculo:a.evento.id,matricula:a.evento.matricula,placa:a.evento.placa,nome:a.evento.nome,caixa:a.caixa.id,movimentacao:"pagamento",pagamento:a.evento.formaPagamento,evento:"saída",tipo:a.evento.tipo,valor:t,porte:a.evento.porte,operador:a.getUser.username,local:a.getUser.local,ambiente:a.getUser.ambiente}).then(function(){"Sócio"===a.evento.tipo&&(a.evento.modoRetorno||("Selo Físico"===a.evento.formaPagamento||"Selo Digital"===a.evento.formaPagamento||"Pendência de Leitura de Carteirinha"===a.evento.formaPagamento?a.evento.price=a.divida.selos:a.evento.price=a.divida.valor),window.sendToElectron(a.evento)),a.$store.commit("snackbar/showMessage",{text:"Saída cadastrada",color:"primary"}),a.reset(),a.requestingToApi=!1}).catch(function(e){console.log(e.response,e),a.requestingToApi=!1,a.$store.commit("snackbar/showMessage",{text:e.response.data,color:"error"}),a.requestingToApi=!1}),a.requestingToApi=!1}).catch(function(e){console.log(e.response,e),a.requestingToApi=!1,a.$store.commit("snackbar/showMessage",{text:e.response.data,color:"error"}),a.requestingToApi=!1})):(this.requestingToApi=!0,this.$api.post("exits",{identry:this.evento.identry,veiculo:this.evento.id,matricula:this.evento.matricula,placa:this.evento.placa,nome:this.evento.nome,caixa:this.caixa.id,movimentacao:"pagamento",pagamento:this.evento.formaPagamento,evento:"saída",tipo:this.evento.tipo,valor:t,porte:this.evento.porte,operador:this.getUser.username,local:this.getUser.local,ambiente:this.getUser.ambiente}).then(function(){"Sócio"===a.evento.tipo&&(a.evento.modoRetorno||("Selo Físico"===a.evento.formaPagamento||"Selo Digital"===a.evento.formaPagamento||"Pendência de Leitura de Carteirinha"===a.evento.formaPagamento?a.evento.price=a.divida.selos:a.evento.price=a.divida.valor),window.sendToElectron(a.evento)),a.$store.commit("snackbar/showMessage",{text:"Saída cadastrada",color:"primary"}),a.reset(),a.requestingToApi=!1}).catch(function(e){console.log(e.response,e),a.requestingToApi=!1,a.$store.commit("snackbar/showMessage",{text:e.response.data,color:"error"}),a.requestingToApi=!1}))):(this.requestingToApi=!0,this.$api.post("calcularPrecos",{ambiente:this.getUser.ambiente,local:this.getUser.local,placa:this.evento.placa,evento:"saída",porte:this.evento.porte,tipo:this.evento.tipo,operador:this.getUser.username}).then(function(e){var t;(e.data.valorRetorno&&(a.evento.modoRetorno=!0,a.evento.price=e.data.valorRetorno,a.evento.formaPagamento=e.data.pagamento),e.data.valor>0)?(a.divida.modal=!0,a.divida.valor=e.data.valor,a.divida.selos=e.data.selos,a.divida.horas=e.data.horas,a.divida.horasUteis=e.data.horasUteis,a.divida.dataEntrada=e.data.dataEntrada,a.divida.dataSaida=e.data.dataSaida,a.divida.consultado=!0):(t="Selo Físico"===a.evento.formaPagamento||"Selo Digital"===a.evento.formaPagamento||"Pendência de Leitura de Carteirinha"===a.evento.formaPagamento?a.divida.selos:a.divida.valor,"Selo Digital"===a.evento.formaPagamento?(a.requestingToApi=!0,a.$crediTimaoAPI.post("estacionamento/debito/".concat(a.evento.matricula.replace("-","")),{operador:a.getUser.username,quantia:t,porte:a.evento.porte}).then(function(e){a.evento.saldoRestante=e.data,a.requestingToApi=!0,a.$api.post("exits",{identry:a.evento.identry,veiculo:a.evento.id,matricula:a.evento.matricula,placa:a.evento.placa,nome:a.evento.nome,caixa:a.caixa.id,movimentacao:"pagamento",pagamento:a.evento.formaPagamento,evento:"saída",tipo:a.evento.tipo,valor:t,porte:a.evento.porte,operador:a.getUser.username,local:a.getUser.local,ambiente:a.getUser.ambiente}).then(function(){"Sócio"===a.evento.tipo&&(a.evento.modoRetorno||("Selo Físico"===a.evento.formaPagamento||"Selo Digital"===a.evento.formaPagamento||"Pendência de Leitura de Carteirinha"===a.evento.formaPagamento?a.evento.price=a.divida.selos:a.evento.price=a.divida.valor),window.sendToElectron(a.evento)),a.$store.commit("snackbar/showMessage",{text:"Saída cadastrada",color:"primary"}),a.reset(),a.requestingToApi=!1}).catch(function(e){console.log(e.response,e),a.requestingToApi=!1,a.$store.commit("snackbar/showMessage",{text:e.response.data,color:"error"}),a.requestingToApi=!1}),a.requestingToApi=!1}).catch(function(e){console.log(e.response,e),a.requestingToApi=!1,a.$store.commit("snackbar/showMessage",{text:e.response.data,color:"error"}),a.requestingToApi=!1})):(a.requestingToApi=!0,a.$api.post("exits",{identry:a.evento.identry,veiculo:a.evento.id,matricula:a.evento.matricula,placa:a.evento.placa,nome:a.evento.nome,caixa:a.caixa.id,movimentacao:"pagamento",pagamento:a.evento.formaPagamento,evento:"saída",tipo:a.evento.tipo,valor:t,porte:a.evento.porte,operador:a.getUser.username,local:a.getUser.local,ambiente:a.getUser.ambiente}).then(function(){"Sócio"===a.evento.tipo&&(a.evento.modoRetorno||("Selo Físico"===a.evento.formaPagamento||"Selo Digital"===a.evento.formaPagamento||"Pendência de Leitura de Carteirinha"===a.evento.formaPagamento?a.evento.price=a.divida.selos:a.evento.price=a.divida.valor),window.sendToElectron(a.evento)),a.$store.commit("snackbar/showMessage",{text:"Saída cadastrada",color:"primary"}),a.reset(),a.requestingToApi=!1}).catch(function(e){console.log(e.response,e),a.requestingToApi=!1,a.$store.commit("snackbar/showMessage",{text:e.response.data,color:"error"}),a.requestingToApi=!1})));a.requestingToApi=!1}).catch(function(e){console.log(e.response,e),a.requestingToApi=!1,a.$store.commit("snackbar/showMessage",{text:e.response.data,color:"error"}),a.requestingToApi=!1})))},next:function(){var e=this;switch(this.step){case 2:if("Entrada"===this.evento.evento)if(this.multiplasMatriculasModal&&(this.multiplasMatriculasModal=!1),this.evento.matricula){var t=document.getElementById("loading_area");t.classList.remove("deactive"),t.classList.add("active"),this.requestingToApi=!0,this.$api.post("omni",{registration:this.evento.matricula.substring(0,6),code:this.evento.matricula.substring(7,9),plate:this.evento.placa,event:this.evento.evento}).then(function(t){var a=document.getElementById("loading_area");a.classList.remove("active"),a.classList.add("deactive"),e.evento.nome=t.data.nome,e.evento.tipo="Sócio",e.evento.identry=t.data.identry,e.evento.came_in=t.data.came_in,e.evento.dependentes=t.data.dependentes,e.requestingToApi=!0,e.$crediTimaoAPI("estacionamento/saldo/".concat(e.evento.matricula.replace("-",""))).then(function(t){e.saldoSelosDigitais.normalCarro=t.data.normalCarro,e.saldoSelosDigitais.normalMoto=t.data.normalMoto,e.saldoSelosDigitais.cortesia=t.data.cortesia,e.step=3,e.requestingToApi=!1}).catch(function(t){console.log(t.response,t),e.requestingToApi=!1,e.$store.commit("snackbar/showMessage",{text:t.response.data,color:"error"})})}).catch(function(t){console.log(t.response,t),e.requestingToApi=!1,e.$store.commit("snackbar/showMessage",{text:t.response.data,color:"error"})})}else this.requestingToApi=!0,this.$api.post("vehicles/".concat(this.evento.placa),{evento:"entrada"}).then(function(t){t.data.placa?(e.evento.id=t.data.id,e.evento.nome=t.data.nome,e.evento.placa=t.data.placa,e.evento.tipo=t.data.tipo,e.evento.modelo=t.data.modelo,e.evento.cor=t.data.cor,e.evento.autorizante=t.data.autorizante,e.evento.came_in=t.data.came_in,e.evento.identry=t.data.identry,e.step=3):(document.getElementById("campo-matricula").focus(),e.$store.commit("snackbar/showMessage",{text:"Faça a leitura da carteirinha",color:"warning"})),e.requestingToApi=!1}).catch(function(t){console.log(t.response,t),e.requestingToApi=!1,e.$store.commit("snackbar/showMessage",{text:t.response.data,color:"error"})});else this.requestingToApi=!0,this.$api.post("vehicles/".concat(this.evento.placa),{evento:"saída"}).then(function(t){t.data.modelo?(e.evento.id=t.data.id,e.evento.nome=t.data.nome,e.evento.placa=t.data.placa,e.evento.tipo=t.data.tipo,e.evento.modelo=t.data.modelo,e.evento.cor=t.data.cor,e.evento.autorizante=t.data.autorizante,e.evento.came_in=t.data.came_in,e.evento.identry=t.data.identry,e.step=3,e.requestingToApi=!1):(e.requestingToApi=!0,e.$api("getRegistrationByPlate/".concat(e.evento.placa)).then(function(t){e.evento.tipo=t.data.tipo,e.evento.nome=t.data.nome,e.evento.identry=t.data.identry,e.evento.matricula=t.data.matricula,e.evento.porte=t.data.porte,e.evento.pagouNaEntrada=t.data.pagoNaEntrada,e.$api.post("omni",{registration:e.evento.matricula.substring(0,6),code:e.evento.matricula.substring(7,9),plate:e.evento.placa,event:e.evento.evento}).then(function(t){e.evento.nome=t.data.nome,e.evento.tipo="Sócio",e.evento.identry=t.data.identry,e.evento.came_in=t.data.came_in,e.evento.price=t.data.valor,e.evento.porte=t.data.porte,e.step=3,t.data.pagoNaEntrada?(e.evento.price=0,e.requestingToApi||e.done(!0)):(e.requestingToApi=!0,e.$crediTimaoAPI("estacionamento/saldo/".concat(e.evento.matricula.replace("-",""))).then(function(t){e.saldoSelosDigitais.normalCarro=t.data.normalCarro,e.saldoSelosDigitais.normalMoto=t.data.normalMoto,e.saldoSelosDigitais.cortesia=t.data.cortesia,e.step=3,e.requestingToApi=!1}).catch(function(t){console.log(t.response,t),e.requestingToApi=!1,e.$store.commit("snackbar/showMessage",{text:t.response.data,color:"error"})})),e.requestingToApi=!1}).catch(function(t){console.log(t.response,t),e.requestingToApi=!1,e.$store.commit("snackbar/showMessage",{text:t.response.data,color:"error"})})}).catch(function(t){console.log(t.response,t),e.requestingToApi=!1,e.$store.commit("snackbar/showMessage",{text:t.response.data,color:"error"})}))}).catch(function(t){console.log(t.response,t),e.requestingToApi=!1,e.$store.commit("snackbar/showMessage",{text:t.response.data,color:"error"})});break;case 3:this.requestingToApi||this.done();break}}},mounted:function(){document.getElementById("myDiv").focus()}},p=v,m=(a("ccdb"),a("2877")),u=a("6544"),h=a.n(u),f=a("0798"),g=a("8336"),b=a("b0af"),x=a("99d9"),_=a("12b2"),y=a("ac7c"),w=a("169a"),k=a("ce7e"),C=a("0e8f"),T=a("adda"),P=a("a722"),S=a("b56d"),A=a("9910"),E=a("7e85"),$=a("e516"),q=a("9c54"),M=a("56a4"),D=a("2677"),V=Object(m["a"])(p,o,i,!1,null,null,null);t["default"]=V.exports;h()(V,{VAlert:f["a"],VBtn:g["a"],VCard:b["a"],VCardActions:x["a"],VCardText:x["b"],VCardTitle:_["a"],VCheckbox:y["a"],VDialog:w["a"],VDivider:k["a"],VFlex:C["a"],VImg:T["a"],VLayout:P["a"],VSelect:S["a"],VSpacer:A["a"],VStepper:E["a"],VStepperContent:$["a"],VStepperHeader:q["a"],VStepperItems:q["b"],VStepperStep:M["a"],VTextField:D["a"]})},"9c54":function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return c});var o=a("80d2"),i=a("7e85"),r=a("56a4"),s=a("e516"),n=Object(o["f"])("v-stepper__header"),c=Object(o["f"])("v-stepper__items");i["a"],s["a"],r["a"]},"9e96":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("PageTitle",{attrs:{title:"Veículos no clube",description:"Veículos que não tiveram uma saída registrada"}}),a("v-card",[a("v-card-title",[a("v-text-field",{attrs:{"prepend-inner-icon":"search",label:"Pesquisar em veículos no clube",clearable:"",box:"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-data-table",{attrs:{loading:e.loadingVehicles,headers:e.headers,items:e.vehicles,search:e.search,"no-data-text":"Não há veículos dentro do clube","rows-per-page-text":"Veículos por página","rows-per-page-items":[25,50,100,{text:"Todos",value:-1}]},scopedSlots:e._u([{key:"items",fn:function(t){return[a("tr",{on:{click:function(e){t.expanded=!t.expanded}}},[a("td",[a("strong",[e._v(e._s(t.item.placa))])]),a("td",[e._v(e._s(t.item.matricula))]),a("td",[e._v(e._s(t.item.nome))]),a("td",[e._v(e._s(t.item.tipo))]),a("td",[e._v(e._s(t.item.porte))]),a("td",[e._v(e._s(t.item.local))]),a("td",[e._v(e._s(e._f("formatDate")(t.item.created_at)))])])]}}])})],1)],1)},i=[],r=a("c97e"),s={name:"NoClube",components:{PageTitle:r["a"]},data:function(){return{loadingVehicles:!0,vehicles:[],search:"",headers:[{text:"Placa",value:"placa"},{text:"Matrícula",value:"matricula"},{text:"Motorista",value:"nome"},{text:"Tipo",value:"tipo"},{text:"Porte",value:"porte"},{text:"Local",value:"local"},{text:"Entrada",value:"created_at"}]}},methods:{loadVehicles:function(){var e=this;this.$api("vehicles/insideTheClub").then(function(t){e.vehicles=t.data,e.loadingVehicles=!1}).catch(function(t){e.$store.commit("snackbar/showMessage",{text:t.response.data,color:"error"})})}},mounted:function(){this.loadVehicles()}},n=s,c=a("2877"),l=a("6544"),d=a.n(l),v=a("b0af"),p=a("12b2"),m=a("8fea"),u=a("2677"),h=Object(c["a"])(n,o,i,!1,null,null,null);t["default"]=h.exports;d()(h,{VCard:v["a"],VCardTitle:p["a"],VDataTable:m["a"],VTextField:u["a"]})},"9f52":function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-expansion-panel",{staticClass:"mt-3"},[a("v-expansion-panel-content",{scopedSlots:e._u([{key:"header",fn:function(){return[a("strong",[e._v("Imprimir segunda via do ticket")])]},proxy:!0}])},[a("v-card",[a("v-card-text",[a("form",{on:{submit:function(t){return t.preventDefault(),e.imprimirSegundaVia(t)}}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm10:""}},[a("v-text-field",{attrs:{box:"","return-masked-value":"",mask:"nnnnnn-nn","prepend-inner-icon":"credit_card",label:"Matrícula","hide-details":""},model:{value:e.matricula,callback:function(t){e.matricula=t},expression:"matricula"}})],1),a("v-flex",{attrs:{xs12:"",sm2:""}},[a("v-btn",{attrs:{color:"primary",block:"",depressed:"",large:"",disabled:!e.matricula},on:{click:e.imprimirSegundaVia}},[a("v-icon",[e._v("print")])],1),a("button",{staticStyle:{display:"none"},attrs:{type:"submit"}},[e._v("Imprimir")])],1)],1)],1)])],1)],1)],1)],1)},i=[],r=(a("8e6e"),a("ac6a"),a("456d"),a("bd86"));function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,o)}return a}function n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(a,!0).forEach(function(t){Object(r["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var c={name:"SegundaVia",data:function(){return{matricula:"",evento:{},prices:{}}},methods:{imprimirSegundaVia:function(){var e=this;this.$api("ultimoFluxo/".concat(this.matricula)).then(function(t){t.data.nome?(e.evento=t.data,window.sendToElectron({evento:"entrada"===e.evento.evento?"Entrada":"Saída",created_at:e.evento.created_at,nome:e.evento.nome,formaPagamento:e.evento.pagamento,placa:e.evento.placa,price:e.evento.valor,matricula:e.evento.matricula,precos:n({},e.prices)}),e.$store.commit("snackbar/showMessage",{text:"Segunda via impressa com sucesso",color:"primary"}),e.reset()):(e.$store.commit("snackbar/showMessage",{text:"Esta matrícula não possui registro de fluxos em nosso histórico",color:"error"}),e.reset())}).catch(function(t){e.$store.commit("snackbar/showMessage",{text:t.response.data,color:"error"})})},reset:function(){this.matricula="",this.evento={}},getPrices:function(){var e=this;this.$api("configuracoes").then(function(t){e.prices=t.data}).catch(function(t){e.$store.commit("snackbar/showMessage",{text:t.response.data,color:"error"})})}},created:function(){this.getPrices()}},l=c,d=a("2877"),v=a("6544"),p=a.n(v),m=a("8336"),u=a("b0af"),h=a("99d9"),f=(a("c321"),a("6a18")),g=a("94ab"),b=a("58df"),x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},_=Object(b["a"])(f["a"],Object(g["b"])("expansionPanel")).extend({name:"v-expansion-panel",provide:function(){return{expansionPanel:this}},props:{disabled:Boolean,readonly:Boolean,expand:Boolean,focusable:Boolean,inset:Boolean,popout:Boolean,value:{type:[Number,Array],default:function(){return null}}},data:function(){return{items:[],open:[]}},computed:{classes:function(){return x({"v-expansion-panel--focusable":this.focusable,"v-expansion-panel--popout":this.popout,"v-expansion-panel--inset":this.inset},this.themeClasses)}},watch:{expand:function(e){var t=-1;if(!e){var a=this.open.reduce(function(e,t){return t?e+1:e},0),o=Array(this.items.length).fill(!1);1===a&&(t=this.open.indexOf(!0)),t>-1&&(o[t]=!0),this.open=o}this.$emit("input",e?this.open:t>-1?t:null)},value:function(e){this.updateFromValue(e)}},mounted:function(){null!==this.value&&this.updateFromValue(this.value)},methods:{updateFromValue:function(e){if(!Array.isArray(e)||this.expand){var t=Array(this.items.length).fill(!1);"number"===typeof e?t[e]=!0:null!==e&&(t=e),this.updatePanels(t)}},updatePanels:function(e){this.open=e;for(var t=0;t<this.items.length;t++)this.items[t].toggle(e&&e[t])},panelClick:function(e){for(var t=this.expand?this.open.slice():Array(this.items.length).fill(!1),a=0;a<this.items.length;a++)this.items[a]._uid===e&&(t[a]=!this.open[a],!this.expand&&this.$emit("input",t[a]?a:null));this.updatePanels(t),this.expand&&this.$emit("input",t)},register:function(e){var t=this.items.push(e)-1;null!==this.value&&this.updateFromValue(this.value),e.toggle(!!this.open[t])},unregister:function(e){var t=this.items.findIndex(function(t){return t._uid===e._uid});this.items.splice(t,1),this.open.splice(t,1)}},render:function(e){return e("ul",{staticClass:"v-expansion-panel",class:this.classes},this.$slots.default)}}),y=a("0789"),w=a("3e79"),k=a("98a1"),C=a("ad54"),T=a("9d26"),P=a("d9bd");function S(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}var A=Object(b["a"])(w["a"],k["a"],C["a"],Object(g["a"])("expansionPanel","v-expansion-panel-content","v-expansion-panel")).extend({name:"v-expansion-panel-content",props:{disabled:Boolean,readonly:Boolean,expandIcon:{type:String,default:"$vuetify.icons.expand"},hideActions:Boolean,ripple:{type:[Boolean,Object],default:!1}},data:function(){return{height:"auto"}},computed:{containerClasses:function(){return{"v-expansion-panel__container--active":this.isActive,"v-expansion-panel__container--disabled":this.isDisabled}},isDisabled:function(){return this.expansionPanel.disabled||this.disabled},isReadonly:function(){return this.expansionPanel.readonly||this.readonly}},beforeMount:function(){this.expansionPanel.register(this),"undefined"!==typeof this.value&&Object(P["c"])("v-model has been deprecated",this)},beforeDestroy:function(){this.expansionPanel.unregister(this)},methods:{onKeydown:function(e){13===e.keyCode&&this.$el===document.activeElement&&this.expansionPanel.panelClick(this._uid)},onHeaderClick:function(){this.isReadonly||this.expansionPanel.panelClick(this._uid)},genBody:function(){return this.$createElement("div",{ref:"body",class:"v-expansion-panel__body",directives:[{name:"show",value:this.isActive}]},this.showLazyContent(this.$slots.default))},genHeader:function(){var e=[].concat(S(this.$slots.header||[]));return this.hideActions||e.push(this.genIcon()),this.$createElement("div",{staticClass:"v-expansion-panel__header",directives:[{name:"ripple",value:this.ripple}],on:{click:this.onHeaderClick}},e)},genIcon:function(){var e=this.$slots.actions||[this.$createElement(T["a"],this.expandIcon)];return this.$createElement("transition",{attrs:{name:"fade-transition"}},[this.$createElement("div",{staticClass:"v-expansion-panel__header__icon",directives:[{name:"show",value:!this.isDisabled}]},e)])},toggle:function(e){var t=this;e&&(this.isBooted=!0),this.$nextTick(function(){return t.isActive=e})}},render:function(e){return e("li",{staticClass:"v-expansion-panel__container",class:this.containerClasses,attrs:{tabindex:this.isReadonly||this.isDisabled?null:0,"aria-expanded":Boolean(this.isActive)},on:{keydown:this.onKeydown}},[this.$slots.header&&this.genHeader(),e(y["a"],[this.genBody()])])}}),E=a("0e8f"),$=a("132d"),q=a("a722"),M=a("2677"),D=Object(d["a"])(l,o,i,!1,null,"22870448",null);t["a"]=D.exports;p()(D,{VBtn:m["a"],VCard:u["a"],VCardText:h["b"],VExpansionPanel:_,VExpansionPanelContent:A,VFlex:E["a"],VIcon:$["a"],VLayout:q["a"],VTextField:M["a"]})},bff6:function(e,t,a){},c321:function(e,t,a){},ccdb:function(e,t,a){"use strict";var o=a("64e7"),i=a.n(o);i.a},dce8:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("PageTitle",{attrs:{title:"Caixa",description:"Abra e feche caixas, gere relatórios e registre saídas"}}),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-dialog",{attrs:{persistent:"",width:"600"},model:{value:e.divergencia.modal,callback:function(t){e.$set(e.divergencia,"modal",t)},expression:"divergencia.modal"}},[a("v-card",[a("v-card-title",{staticClass:"headline error white--text text-uppercase"},[e._v("Necessário fazer uma retirada")]),a("v-card-text",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("p",[e._v("\n                Há uma diferença de\n                "),a("strong",[e._v(e._s(e._f("formatPrice")(e.divergencia.valor)))]),e._v("\n                .\n                "+e._s(e.divergencia.valor>=0?"É necessário fazer uma retirada para atingir o saldo inicial padrão definido pelo administrador.":"É necessário fazer uma entrada para atingir os saldo inicial padrão definido pelo administrador.")+"\n              ")]),a("p",[e._v("Deseja mesmo continuar?")])])],1)],1),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{color:"secondary",flat:""},on:{click:function(t){e.divergencia={modal:!1,value:0}}}},[e._v("Cancelar")]),a("v-spacer"),a("v-btn",{attrs:{color:"error"},on:{click:e.autoWithdraw}},[e._v("Sim, continuar")])],1)],1)],1),a("v-dialog",{attrs:{persistent:"",width:"900"},model:{value:e.movimentacao.modal,callback:function(t){e.$set(e.movimentacao,"modal",t)},expression:"movimentacao.modal"}},[a("v-card",[a("v-card-title",{staticClass:"primary white--text"},[a("div",[a("div",{staticClass:"headline text-uppercase"},[e._v("Editar movimentação")]),a("span",[e._v("Corrija informações que foram inseridas incorretamente")])])]),a("v-card-text",[a("v-layout",{staticClass:"mb-2",attrs:{row:""}},[a("v-flex",{attrs:{xs4:""}},[a("v-text-field",{attrs:{"hide-details":"",prefix:"R$",label:"Valor",type:"number"},model:{value:e.movimentacao.valor,callback:function(t){e.$set(e.movimentacao,"valor",e._n(t))},expression:"movimentacao.valor"}})],1),a("v-flex",{staticClass:"mx-2",attrs:{xs4:""}},[a("v-select",{attrs:{"hide-details":"","prepend-inner-icon":"attach_money",items:["Dinheiro","Selo Físico","Cartão de débito","Cartão de crédito"],label:"Forma de pagamento"},model:{value:e.movimentacao.pagamento,callback:function(t){e.$set(e.movimentacao,"pagamento",t)},expression:"movimentacao.pagamento"}})],1),a("v-flex",{attrs:{xs4:""}},[a("v-select",{attrs:{"hide-details":"","prepend-inner-icon":"directions_car",items:["Carro","Motocicleta","Bicicleta"],label:"Porte"},model:{value:e.movimentacao.porte,callback:function(t){e.$set(e.movimentacao,"porte",t)},expression:"movimentacao.porte"}})],1)],1),a("v-layout",{attrs:{row:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{attrs:{"hide-details":"",label:"Motivo"},model:{value:e.movimentacao.motivo,callback:function(t){e.$set(e.movimentacao,"motivo",t)},expression:"movimentacao.motivo"}})],1)],1)],1),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{color:"secondary",flat:""},on:{click:function(t){e.movimentacao={modal:!1}}}},[e._v("Cancelar")]),a("v-spacer"),a("v-btn",{attrs:{color:"primary",depressed:"",disabled:!e.movimentacao.motivo},on:{click:e.salvarMovimentacao}},[e._v("Salvar")])],1)],1)],1),a("v-flex",{attrs:{xs12:""}},[a("v-card",[a("v-responsive",[a("v-container",{attrs:{fluid:""}},[a("v-layout",{attrs:{"align-center":""}},[a("v-flex",[e.caixa.estado?a("div",{staticClass:"headline mb-3"},[e._v("Não há um caixa aberto no momento. Deseja abrir um agora?")]):a("div",{staticClass:"headline mb-3"},[e._v("O caixa #"+e._s(e.caixa.id)+" está aberto no momento. Deseja fechá-lo?")]),e.caixa.estado?a("v-dialog",{attrs:{width:"500"},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[a("v-btn",e._g({attrs:{color:"primary"}},o),[e._v("Abrir caixa")])]}}],null,!1,3542146226),model:{value:e.openModal,callback:function(t){e.openModal=t},expression:"openModal"}},[a("v-card",[a("v-card-title",{staticClass:"headline primary white--text text-uppercase"},[e._v("Abrir caixa")]),a("v-card-text",[a("v-flex",{staticClass:"mb-3"},[e._v("Digite o saldo inicial do caixa a ser aberto. Por padrão, o saldo inicial é o saldo final real do caixa anterior.")]),a("v-flex",[a("v-text-field",{attrs:{label:"Saldo inicial",prefix:"R$",type:"number",hint:"Por padrão, o saldo inicial é o saldo final real do caixa anterior.","persistent-hint":""},model:{value:e.saldoInicial,callback:function(t){e.saldoInicial=t},expression:"saldoInicial"}})],1)],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",flat:""},on:{click:e.openCashbox}},[e._v("Abrir")])],1)],1)],1):a("v-btn",{attrs:{disabled:"gestao"!==e.getUser.role,color:"error"},on:{click:e.closeCashbox}},[e._v("Fechar caixa")]),"gestao"===e.getUser.role?a("v-dialog",{attrs:{width:"500"},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[e.caixa.estado?e._e():a("v-btn",e._g({attrs:{color:"primary",flat:""}},o),[e._v("Retirar manualmente")])]}}],null,!1,1706770191),model:{value:e.withdrawModal,callback:function(t){e.withdrawModal=t},expression:"withdrawModal"}},[a("v-card",[a("v-card-title",{staticClass:"headline primary white--text text-uppercase"},[e._v("Retirar manualmente")]),a("v-card-text",[a("v-flex",{staticClass:"mb-3"},[e._v("Digite o montante que será retirado do caixa. Lembre-se que o montante não pode ser maior que o valor real do caixa.")]),a("v-flex",[a("v-text-field",{attrs:{label:"Montante de retirada",prefix:"R$",type:"number"},model:{value:e.withdraw,callback:function(t){e.withdraw=t},expression:"withdraw"}})],1),a("v-flex",[a("v-text-field",{attrs:{label:"Motivo da retirada"},model:{value:e.withdrawReason,callback:function(t){e.withdrawReason=t},expression:"withdrawReason"}})],1)],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",flat:"",disabled:!e.withdrawReason},on:{click:e.onWithdraw}},[e._v("Retirar")])],1)],1)],1):e._e()],1)],1)],1)],1)],1)],1),e.caixa.id?a("v-flex",{attrs:{xs12:""}},[a("v-card",[a("v-card-title",{attrs:{"primary-title":""}},[a("div",[a("div",{staticClass:"headline"},[e._v("Informações do caixa #"+e._s(e.caixa.id))]),a("span",[e._v("Tenha acesso a informações como o operador inicial, data e hora inicial, saldo inicial, operador final, data e hora final, saldo final bruto, saldo final real e montante retirado")])])]),a("v-card-text",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-flex",{attrs:{xs12:""}},[e._v("\n                Operador inicial:\n                "),a("strong",[e._v(e._s(e.caixa.operadorInicial))])]),a("v-flex",{attrs:{xs12:""}},[e._v("\n                Data e hora inicial:\n                "),a("strong",[e._v(e._s(e._f("formatDate")(e.caixa.created_at)))])]),a("v-flex",{attrs:{xs12:""}},[e._v("\n                Saldo inicial:\n                "),a("strong",[e._v(e._s(e._f("formatPrice")(e.caixa.saldoInicial)))])])],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-flex",{attrs:{xs12:""}},[e._v("\n                Operador final:\n                "),a("strong",[e._v(e._s(e.caixa.operadorFinal))])]),a("v-flex",{attrs:{xs12:""}},[e._v("\n                Data e hora final:\n                "),e.caixa.estado?a("strong",[e._v(e._s(e._f("formatDate")(e.caixa.updated_at)))]):a("strong")]),a("v-flex",{attrs:{xs12:""}},[e._v("\n                Saldo final bruto (saldo inicial + dinheiro + cartão):\n                "),e.caixa.estado?a("strong",[e._v(e._s(e._f("formatPrice")(e.caixa.saldoFinalBruto)))]):a("strong",[e._v(e._s(e._f("formatPrice")(e.saldoFinalBruto)))])]),a("v-flex",{attrs:{xs12:""}},[e._v("\n                Saldo final real (saldo inicial + dinheiro):\n                "),e.caixa.estado?a("strong",[e._v(e._s(e._f("formatPrice")(e.caixa.saldoFinalReal)))]):a("strong",[e._v(e._s(e._f("formatPrice")(e.saldoFinalReal)))])]),a("v-flex",{attrs:{xs12:""}},[e._v("\n                Montante retirado:\n                "),e.caixa.estado?a("strong",[e._v(e._s(e._f("formatPrice")(e.caixa.montanteRetirado)))]):a("strong",[e._v(e._s(e._f("formatPrice")(e.montanteRetirado)))])])],1)],1)],1)],1)],1):e._e(),e.caixa.id&&"gestao"===e.getUser.role?a("v-flex",{attrs:{xs12:""}},[a("v-card",[a("v-card-title",[a("h2",{staticClass:"headline"},[e._v("Histórico de movimentações")]),a("v-text-field",{staticClass:"mx-3",attrs:{label:"Pesquise por movimentações"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("v-select",{attrs:{items:e.caixas,"item-value":"id","no-data-text":"Não há histórico de caixas",label:"Selecione um caixa"},scopedSlots:e._u([{key:"selection",fn:function(t){return["*"!==t.item.id?[e._v("Caixa #"+e._s(t.item.id)+" - Aberto em "+e._s(e._f("formatDate")(t.item.created_at)))]:[a("strong",[e._v("Todos os caixas - Desde "+e._s(e._f("formatDate")(t.item.created_at)))])]]}},{key:"item",fn:function(t){return["*"!==t.item.id?[e._v("Caixa #"+e._s(t.item.id)+" - Aberto em "+e._s(e._f("formatDate")(t.item.created_at)))]:[a("strong",[e._v("Todos os caixas - Desde "+e._s(e._f("formatDate")(t.item.created_at)))])]]}}],null,!1,643659004),model:{value:e.caixaId,callback:function(t){e.caixaId=t},expression:"caixaId"}}),a("v-dialog",{ref:"dialog",attrs:{"return-value":e.date1,persistent:"",lazy:"","full-width":"",width:"290px"},on:{"update:returnValue":function(t){e.date1=t},"update:return-value":function(t){e.date1=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[a("v-text-field",e._g({staticClass:"mx-2",attrs:{type:"date",label:"Data inicial","prepend-inner-icon":"event",readonly:"",clearable:""},model:{value:e.date1,callback:function(t){e.date1=t},expression:"date1"}},o))]}}],null,!1,3124034487),model:{value:e.modal1,callback:function(t){e.modal1=t},expression:"modal1"}},[a("v-date-picker",{attrs:{locale:"pt-br",scrollable:""},model:{value:e.date1,callback:function(t){e.date1=t},expression:"date1"}},[a("v-spacer"),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(t){e.modal1=!1}}},[e._v("Cancelar")]),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(t){return e.$refs.dialog.save(e.date1)}}},[e._v("OK")])],1)],1),a("v-dialog",{ref:"dialog2",attrs:{"return-value":e.date2,persistent:"",lazy:"","full-width":"",width:"290px"},on:{"update:returnValue":function(t){e.date2=t},"update:return-value":function(t){e.date2=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[a("v-text-field",e._g({staticClass:"mx-2",attrs:{type:"date",label:"Data final","prepend-inner-icon":"event",readonly:"",clearable:""},model:{value:e.date2,callback:function(t){e.date2=t},expression:"date2"}},o))]}}],null,!1,988483025),model:{value:e.modal2,callback:function(t){e.modal2=t},expression:"modal2"}},[a("v-date-picker",{attrs:{locale:"pt-br",scrollable:""},model:{value:e.date2,callback:function(t){e.date2=t},expression:"date2"}},[a("v-spacer"),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(t){e.modal2=!1}}},[e._v("Cancelar")]),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(t){return e.$refs.dialog2.save(e.date2)}}},[e._v("OK")])],1)],1)],1),a("v-card-text",[a("v-data-table",{attrs:{loading:e.loadingAllCashboxes,headers:e.headers,search:e.search,items:e.fluxosConsultas,"no-data-text":"Não há movimentações cadastradas no caixa #"+e.caixaId+" que atendem os filtros aplicados","rows-per-page-text":"Movimentações por página","rows-per-page-items":[25,50,100,{text:"Todas",value:-1}]},scopedSlots:e._u([{key:"items",fn:function(t){return[a("tr",{class:t.item.cancelado?"grey--text red-line":""},[a("td",{staticClass:"text-xs-center"},[a("v-icon",{attrs:{color:t.item.valor>=0?t.item.cancelado?"grey":"primary":"error"}},[e._v(e._s(t.item.valor>=0?t.item.cancelado?"Pendência de Leitura de Carteirinha"===t.item.pagamento?"credit_card":"block":"add_circle":"remove_circle"))])],1),"Selo Digital"!==t.item.pagamento&&"Selo Físico"!==t.item.pagamento&&"Pendência de Leitura de Carteirinha"!==t.item.pagamento?a("td",[e._v(e._s(e._f("formatPrice")(t.item.valor)))]):a("td",[e._v(e._s(t.item.valor)+" selos")]),a("td",{staticClass:"text-capitalize"},[e._v(e._s(t.item.pagamento))]),a("td",{staticClass:"text-capitalize"},[e._v(e._s(t.item.evento))]),a("td",[e._v(e._s(t.item.matricula))]),a("td",[e._v(e._s(t.item.placa))]),a("td",[e._v(e._s(t.item.nome))]),a("td",[e._v(e._s(t.item.porte))]),a("td",[e._v(e._s(t.item.motivoRetirada))]),a("td",[e._v(e._s(t.item.operador))]),a("td",[e._v(e._s(t.item.local))]),a("td",[e._v(e._s(t.item.ambiente))]),a("td",[e._v(e._s(e._f("formatDate")(t.item.created_at)))]),a("td",[e._v(e._s(t.item.id))]),a("td",[e._v(e._s(t.item.parente))]),a("td",[t.item.cancelado||"retirada"===t.item.movimentacao||t.item.caixa!==e.caixa.id||"Selo Digital"===t.item.pagamento?e._e():a("v-btn",{attrs:{flat:"",icon:""},on:{click:function(a){return e.editarMovimentacao(t.item)}}},[a("v-icon",[e._v("create")])],1)],1)])]}}],null,!1,4210879025)})],1)],1)],1):e._e()],1)],1)},i=[],r=(a("8e6e"),a("456d"),a("ac6a"),a("bd86")),s=a("c97e"),n=a("2f62");function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,o)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(a,!0).forEach(function(t){Object(r["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var d={name:"Caixa",components:{PageTitle:s["a"]},data:function(){return{date1:null,date2:null,modal1:!1,modal2:!1,loadingAllCashboxes:!0,loadingCashbox:!0,divergencia:{modal:!1,valor:!1},movimentacao:{modal:!1},search:"",saldoInicial:0,withdrawModal:!1,withdrawReason:"",openModal:!1,caixaId:1,withdraw:null,caixa:{},caixas:[],fluxos:[],fluxosConsultas:[],headers:[{text:"",value:"movimentacao"},{text:"Valor",value:"valor"},{text:"Pagamento",value:"pagamento"},{text:"Evento",value:"evento"},{text:"Matrícula",value:"matricula"},{text:"Placa",value:"placa"},{text:"Nome",value:"nome"},{text:"Porte",value:"porte"},{text:"Motivo",value:"motivoRetirada"},{text:"Operador",value:"operador"},{text:"Local",value:"local"},{text:"Dispositivo",value:"ambiente"},{text:"Data",value:"created_at"},{text:"ID",value:"id"},{text:"Referência",value:"parente"},{text:"",value:"actions"}]}},computed:l({},Object(n["b"])("user",["getUser"]),{saldoFinalBruto:function(){var e=0,t=this.caixa.saldoInicial;return this.fluxos.forEach(function(a){"divergência"===a.evento||a.cancelado||"Selo Digital"===a.pagamento||"Selo Físico"===a.pagamento||("retirada"!==a.movimentacao&&(t+=a.valor),"retirada"===a.movimentacao&&(e+=a.valor))}),t+e},saldoFinalReal:function(){var e=0,t=0,a=this.caixa.saldoInicial;return this.fluxos.forEach(function(o){"divergência"===o.evento||o.cancelado||"Selo Digital"===o.pagamento||"Selo Físico"===o.pagamento||("retirada"!==o.movimentacao&&(a+=o.valor),"retirada"===o.movimentacao&&(e+=o.valor),("pagamento"===o.movimentacao&&"Cartão de débito"===o.pagamento||"Cartão de crédito"===o.pagamento)&&(t+=o.valor))}),a-t+e},montanteRetirado:function(){var e=0;return this.fluxos.forEach(function(t){"divergência"===t.evento||t.cancelado||"Selo Digital"===t.pagamento||"Selo Físico"===t.pagamento||"retirada"===t.movimentacao&&(e+=t.valor)}),e}}),methods:{autoWithdraw:function(){var e=this;this.$api.post("cash/withdraw",{id:this.caixa.id,movimentacao:"retirada",pagamento:"Dinheiro",evento:this.divergencia.valor>0?"retirada":"entrada",tipo:"Funcionário",valor:-1*this.divergencia.valor,operador:this.getUser.username,motivoRetirada:"[Motivo automático] ".concat(this.divergencia.valor>0?"Retirada":"Entrada"," para atingir o saldo inicial do caixa definido pelo administrador.")}).then(function(){e.divergencia={modal:!1,valor:0},e.withdrawModal=!1,e.withdraw=null,e.withdrawReason="",e.loadLastCashbox(),e.loadCashboxes(),setTimeout(function(){e.$api.post("cash/close",{id:e.caixa.id,operadorFinal:e.getUser.username,saldoFinalBruto:e.saldoFinalBruto,saldoFinalReal:e.saldoFinalReal,montanteRetirado:e.montanteRetirado}).then(function(){e.$store.commit("snackbar/showMessage",{text:"Caixa fechado com sucesso",color:"primary"}),e.loadLastCashbox(),e.loadCashboxes()}).catch(function(t){"divergência"===t.response.data.error?e.divergencia={modal:!0,valor:t.response.data.value}:e.$store.commit("snackbar/showMessage",{text:t.response.data,color:"error"})})},250)}).catch(function(t){e.$store.commit("snackbar/showMessage",{text:t.response.data,color:"error"})})},editarMovimentacao:function(e){this.movimentacao=Object.assign({},e),this.movimentacao.modal=!0},salvarMovimentacao:function(){var e=this;this.movimentacao.operador=this.getUser.username,this.$api.post("fluxos/editar",this.movimentacao).then(function(){e.$store.commit("snackbar/showMessage",{text:"Fluxo editado com sucesso",color:"primary"}),e.loadLastCashbox(),e.loadCashboxes(),e.$api("cash/".concat(e.movimentacao.caixa)).then(function(t){return e.fluxosConsultas=t.data}).catch(function(t){e.$store.commit("snackbar/showMessage",{text:t.response.data,color:"error"})}),e.movimentacao={modal:!1}}).catch(function(t){e.$store.commit("snackbar/showMessage",{text:t.response.data,color:"error"})})},onWithdraw:function(){var e=this;this.withdraw<0&&(this.withdraw=-1*this.withdraw),this.$api.post("cash/withdraw",{id:this.caixa.id,movimentacao:"retirada",pagamento:"Dinheiro",evento:"retirada",tipo:"Funcionário",valor:-1*this.withdraw,operador:this.getUser.username,motivoRetirada:this.withdrawReason}).then(function(){e.withdrawModal=!1,e.withdraw=null,e.withdrawReason="",e.loadLastCashbox(),e.loadCashboxes()}).catch(function(t){e.$store.commit("snackbar/showMessage",{text:t.response.data,color:"error"})})},loadCashboxes:function(){var e=this;this.$api("cash/all").then(function(t){return e.caixas=t.data}).catch(function(t){e.$store.commit("snackbar/showMessage",{text:t.response.data,color:"error"})})},loadLastCashbox:function(){var e=this;this.$api("cash").then(function(t){e.caixa=t.data.caixa,t.data.caixa.saldoFinalReal&&(e.saldoInicial=t.data.caixa.saldoFinalReal),e.fluxos=t.data.fluxos,e.fluxosConsultas=t.data.fluxos,e.caixaId=t.data.caixa.id,e.loadingCashbox=!1}).catch(function(t){e.$store.commit("snackbar/showMessage",{text:t.response.data,color:"error"})})},openCashbox:function(){var e=this;this.caixa.saldoFinalReal,this.saldoInicial,this.$api.post("cash/open",{operadorInicial:this.getUser.username,saldoInicial:this.saldoInicial}).then(function(){e.$store.commit("snackbar/showMessage",{text:"Caixa aberto com sucesso",color:"primary"}),e.loadLastCashbox(),e.loadCashboxes()}).catch(function(t){e.$store.commit("snackbar/showMessage",{text:t.response.data,color:"error"})})},closeCashbox:function(){var e=this;this.$api.post("cash/close",{id:this.caixa.id,operadorFinal:this.getUser.username,saldoFinalBruto:this.saldoFinalBruto,saldoFinalReal:this.saldoFinalReal,montanteRetirado:this.montanteRetirado}).then(function(){e.$store.commit("snackbar/showMessage",{text:"Caixa fechado com sucesso",color:"primary"}),e.loadLastCashbox(),e.loadCashboxes()}).catch(function(t){"divergência"===t.response.data.error?e.divergencia={modal:!0,valor:t.response.data.value}:e.$store.commit("snackbar/showMessage",{text:t.response.data,color:"error"})})}},created:function(){this.user=this.getUser,this.loadLastCashbox(),this.loadCashboxes()},watch:{caixaId:function(e,t){var a=this;"gestao"===this.getUser.role&&(this.loadingAllCashboxes=!0,this.$api("cash/".concat(e,"?").concat(this.date1?"de=".concat(this.date1):"").concat(this.date2?"&ate=".concat(this.date2):"")).then(function(e){a.fluxosConsultas=e.data,a.loadingAllCashboxes=!1}).catch(function(e){a.$store.commit("snackbar/showMessage",{text:e.response.data,color:"error"})}),this.modal1=!1,this.modal2=!1,this.date1=!1,this.date2=!1)}}},v=d,p=a("2877"),m=a("6544"),u=a.n(m),h=a("8336"),f=a("b0af"),g=a("99d9"),b=a("12b2"),x=a("a523"),_=a("8fea"),y=a("2e4b"),w=a("169a"),k=a("ce7e"),C=a("0e8f"),T=a("132d"),P=a("a722"),S=a("6b53"),A=a("b56d"),E=a("9910"),$=a("2677"),q=a("a844"),M=Object(p["a"])(v,o,i,!1,null,null,null);t["default"]=M.exports;u()(M,{VBtn:h["a"],VCard:f["a"],VCardActions:g["a"],VCardText:g["b"],VCardTitle:b["a"],VContainer:x["a"],VDataTable:_["a"],VDatePicker:y["a"],VDialog:w["a"],VDivider:k["a"],VFlex:C["a"],VIcon:T["a"],VLayout:P["a"],VResponsive:S["a"],VSelect:A["a"],VSpacer:E["a"],VTextField:$["a"],VTextarea:q["a"]})},e516:function(e,t,a){"use strict";var o=a("0789"),i=a("94ab"),r=a("80d2"),s=a("58df");t["a"]=Object(s["a"])(Object(i["a"])("stepper","v-stepper-content","v-stepper")).extend({name:"v-stepper-content",inject:{isVerticalProvided:{from:"isVertical"}},props:{step:{type:[Number,String],required:!0}},data:function(){return{height:0,isActive:null,isReverse:!1,isVertical:this.isVerticalProvided}},computed:{classes:function(){return{"v-stepper__content":!0}},computedTransition:function(){return this.isReverse?o["d"]:o["e"]},styles:function(){return this.isVertical?{height:Object(r["c"])(this.height)}:{}},wrapperClasses:function(){return{"v-stepper__wrapper":!0}}},watch:{isActive:function(e,t){e&&null==t?this.height="auto":this.isVertical&&(this.isActive?this.enter():this.leave())}},mounted:function(){this.$refs.wrapper.addEventListener("transitionend",this.onTransition,!1),this.stepper&&this.stepper.register(this)},beforeDestroy:function(){this.$refs.wrapper.removeEventListener("transitionend",this.onTransition,!1),this.stepper&&this.stepper.unregister(this)},methods:{onTransition:function(e){this.isActive&&"height"===e.propertyName&&(this.height="auto")},enter:function(){var e=this,t=0;requestAnimationFrame(function(){t=e.$refs.wrapper.scrollHeight}),this.height=0,setTimeout(function(){return e.isActive&&(e.height=t||"auto")},450)},leave:function(){var e=this;this.height=this.$refs.wrapper.clientHeight,setTimeout(function(){return e.height=0},10)},toggle:function(e,t){this.isActive=e.toString()===this.step.toString(),this.isReverse=t}},render:function(e){var t={class:this.classes},a={class:this.wrapperClasses,style:this.styles,ref:"wrapper"};this.isVertical||(t.directives=[{name:"show",value:this.isActive}]);var o=e("div",a,[this.$slots.default]),i=e("div",t,[o]);return e(this.computedTransition,{on:this.$listeners},[i])}})}}]);